webpackJsonp([31],{"0Bk1":function(t,a,e){a=t.exports=e("FZ+f")(!1),a.push([t.i,".crawler-title{font-size:22px;margin:12px 0}",""])},"3k72":function(t,a,e){"use strict";var r=e("V8bM");a.a={props:["from","defaultURL","cateId","categories"],data:function(){return{formData:{scope:"list",crawlExist:0,articles:[]},urlValidate:{type:"url",required:!0,message:"无效的URL"}}},mounted:function(){this.formData.articles.push({url:this.defaultURL})},methods:{onAdd:function(){this.formData.articles.push({url:""})},onSubmit:function(){var t=this;this.$refs.urlsForm.validate(function(a){if(a){for(var e=[],o=0;o<t.formData.articles.length;o++)e.push(t.formData.articles[o].url);r.a.crawl({body:{scope:t.formData.scope,crawlExist:!!t.formData.crawlExist,urls:e,from:t.from,categoryID:parseInt(t.cateId)}}).then(function(){t.$Message.success("抓取成功!")}).catch(function(a){t.$Message.error(a.msg)})}})}}}},"5wgm":function(t,a,e){var r=e("0Bk1");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("49c12e6a",r,!0)},"7ana":function(t,a,e){"use strict";function r(t){e("5wgm")}Object.defineProperty(a,"__esModule",{value:!0});var o=e("84X1"),s=e("qdUb"),l=e("VU/8"),n=r,c=l(o.a,s.a,!1,n,null,null);a.default=c.exports},"84X1":function(t,a,e){"use strict";var r=e("TfCd"),o=e("V8bM");a.a={layout:"admin",middleware:"adminRequired",asyncData:function(t){return o.a.getCategories({client:t.req}).then(function(t){var a=t.data.categories;return{cateId:a&&a[0].id+""||"",categories:a}}).catch(function(a){console.log(a),t.error({statusCode:404,message:"Page not found"})})},data:function(){return{url:"http://www.jianshu.com/c/c7634b78294d"}},components:{crawler:r.a},head:function(){return{title:"抓取简书"}}}},Iozv:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Row",[e("Form",{ref:"urlsForm",attrs:{model:t.formData,"label-width":80}},[e("FormItem",{attrs:{label:"网页类型",prop:"scope"}},[e("Row",[e("Col",[e("RadioGroup",{model:{value:t.formData.scope,callback:function(a){t.formData.scope=a},expression:"formData.scope"}},[e("Radio",{attrs:{label:"list"}},[t._v("文章列表URL")]),e("Radio",{attrs:{label:"page"}},[t._v("文章URL")])],1)],1)],1)],1),e("FormItem",{attrs:{label:"强制抓取"}},[e("Row",[e("Col",[e("RadioGroup",{model:{value:t.formData.crawlExist,callback:function(a){t.formData.crawlExist=a},expression:"formData.crawlExist"}},[e("Radio",{attrs:{label:1}},[t._v("是")]),e("Radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1)],1),e("FormItem",{attrs:{label:"版块"}},[e("Row",[e("Col",{attrs:{span:"12"}},[e("Select",{attrs:{placeholder:"请选择版块"},model:{value:t.cateId,callback:function(a){t.cateId=a},expression:"cateId"}},t._l(t.categories,function(a){return e("Option",{key:a.id,attrs:{value:a.id+""}},[t._v(t._s(a.name))])}))],1)],1)],1),t._l(t.formData.articles,function(a,r){return e("FormItem",{key:r,attrs:{label:"URL",prop:"articles."+r+".url",rules:t.urlValidate}},[e("Row",[e("Col",{attrs:{span:"12"}},[e("Input",{attrs:{placeholder:"请输入URL"},model:{value:a.url,callback:function(t){a.url=t},expression:"article.url"}})],1)],1)],1)}),e("FormItem",[e("Row",[e("Col",{attrs:{span:"4"}},[e("Button",{attrs:{type:"dashed",long:"",icon:"plus-round"},on:{click:t.onAdd}},[t._v("添加URL")])],1)],1)],1),e("FormItem",[e("Button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("开始抓取")])],1)],2)],1)},o=[],s={render:r,staticRenderFns:o};a.a=s},TfCd:function(t,a,e){"use strict";var r=e("3k72"),o=e("Iozv"),s=e("VU/8"),l=s(r.a,o.a,!1,null,null,null);a.a=l.exports},qdUb:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Row",[e("h1",{staticClass:"crawler-title"},[t._v("简书")]),e("crawler",{attrs:{from:1,defaultURL:t.url,cateId:t.cateId,categories:t.categories}})],1)},o=[],s={render:r,staticRenderFns:o};a.a=s}});
//# sourceMappingURL=jianshu.6d7611a3b6c9d1eb649b.js.map